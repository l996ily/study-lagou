#### 一、谈谈你是如何理解 JS 异步编程的，EventLoop、消息队列都是做什么的，什么是宏任务，什么是微任务？

##### JS 异步编程的理解

+ JS 是单线程语言
  JS主要会对DOM元素进行操作，如果有多个线程的话，就会存在当我们去删除元素或添加元素的时候，js运行机制就不知道先去执行那个操作，导致程序的混乱，所以这就决定了 JS 单线程语言的特点。

+ 同步

  由于JS单线程的特点，所以JS会严格按照单线程（从左到右，从上到下的方式）执行代码逻辑，在遇到耗时的代码片段时，之后的代码都必须等到耗时代码运行完毕，才能执行。

+ 异步

  为同步的对立面，所有异步的代码不会按照默认顺序执行。JS引擎工作时，仍按照同步模式先运行代码，若遇到异步代码，在会将当前任务 “挂起” 并略过。直到所有的同步代码都执行完毕后，再将之前“挂起”的异步代码按照一定的顺序进行执行。

+ 总结

  同步代码一旦遇到耗时的任务，就会造成代码的阻塞，如http请求向服务器发送，就会出现等待数据返回之前网页假死的效果出现，所以为了解决同步代码执行带来的问题，所以产生了JS异步编程。

##### EventLoop

​	EventLoop 为事件循环机制，当遇到同步代码时，会进入执行栈中进行执行，而异步代码则会放在工作线程中暂时挂起。进⼊执⾏栈的函数会按照从外到内的顺序依次运⾏，运⾏中涉及到的对象数据是在堆内存中进⾏保存和管理的。当执⾏栈内的任务全部执⾏完毕后，执⾏栈就会清空。这时“事件循环”就会工作，“事件循环”会检测“任务队列”中是否有要执行的任务，并按着先进先出的原则进行执行。而这种主线程从“任务队列”读取事件，这个过程是事件循环机制。

##### 消息队列

​	当程序运行时，遇到异步任务，会将异步任务在工作线程中进行 “挂起”，定时任务时间到达或网络请求数据返回时，会将异步任务放进任务队列。等到同步任务执行完毕后，按着先进先出的原则，执行任务队列的代码。

##### 宏任务

​	宏任务是JavaScript中最原始的异步任务，包括setTimeout、setInterVal、AJAX等，在代码执⾏环境中按照同步代码的顺序，逐个进⼊⼯作线程挂起，再按照异步任务到达的时间节点，逐个进⼊异步任务队列，最终按照队列中的 顺序进⼊函数执⾏栈进⾏执⾏。

##### 微任务

​	微任务在异步任务队列的基础上增加了【微任务】的概念，每 ⼀个宏任务执⾏前，程序会先检测中是否有当次事件循环未执⾏的微任务，优先清空本次的微任务后，再执⾏下⼀ 个宏任务，每⼀个宏任务内部可注册当次任务的微任务队列，再下⼀个宏任务执⾏前运⾏，微任务也是按照进⼊队列的顺序执⾏的 